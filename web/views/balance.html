<!DOCTYPE html>
<html lang="en">
{{ template "html-head" }}
<body>
    <div class="body">
        {{ template "header" }}
        <div class="content">
            <div class="container">
                {{ if .error }}
                <div class="alert alert-danger">{{ .error }}</div>
                {{ else }}
                <div>
                    <form class="mb-2">
                        <div class="form-check">
                            <input class="form-check-input"
                                   type="checkbox"
                                   value="yes"
                                   name="detailed"
                                   id="detailed"
                                   {{ if .detailed }}
                                   checked
                                   {{ end }}
                                   onChange="this.form.submit()">
                            <label class="form-check-label" for="detailed">Show detailed balance</label>
                        </div>
                    </form>

                    <table class="table">
                        <thead>
                        <tr>
                            <th>Account Name</th>
                            <th>Balance</th>
                            {{ if .detailed }}
                            <th>Spendable</th>
                            <th>Locked By Tickets</th>
                            <th>Voting Authority</th>
                            <th>Unconfirmed</th>
                            {{ end }}
                        </tr>
                        </thead>
                        <tbody>
                        {{ range $account := .accounts }}
                        <tr>
                            <td>{{ $account.Name }}</td>
                            <td>
                            {{ if or ($.detailed) (eq $account.Balance.Total $account.Balance.Spendable) }}
                                {{ $account.Balance.Total }}
                            {{ else }}
                                Total {{ $account.Balance.Total }} (Spendable {{ $account.Balance.Spendable }})
                            {{ end }}
                            </td>
                            {{ if $.detailed }}
                                <td> {{ $account.Balance.Spendable }}</td>
                                <td> {{ $account.Balance.LockedByTickets }}</td>
                                <td> {{ $account.Balance.VotingAuthority }}</td>
                                <td> {{ $account.Balance.Unconfirmed }}</td>
                            {{ end }}
                        </tr>
                        {{ end }}
                        </tbody>
                    </table>
                </div>
                {{ end }}
            </div>
        </div>
    </div>
</body>
</html>